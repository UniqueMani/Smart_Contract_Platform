# AI合同审查功能实现方案

## 一、法律条例数据库来源

### 1. 官方法律法规数据库（推荐）

#### 1.1 国家法律法规数据库
- **网址**: http://www.npc.gov.cn/（全国人大）
- **内容**: 包含《合同法》、《政府采购法》、《招标投标法》等
- **特点**: 权威、完整、免费
- **获取方式**: 
  - 直接爬取（需遵守robots.txt）
  - 使用API（如果有提供）
  - 手动整理关键条款

#### 1.2 中国政府网法律法规库
- **网址**: http://www.gov.cn/zhengce/zhengceku/
- **内容**: 国务院行政法规、部门规章
- **特点**: 官方权威，更新及时

#### 1.3 中国政府采购网
- **网址**: http://www.ccgp.gov.cn/
- **内容**: 政府采购相关法规、合同范本
- **特点**: 针对性强，有标准合同模板

### 2. 专业法律数据库（商业）

#### 2.1 北大法宝
- **网址**: https://www.pkulaw.com/
- **内容**: 法律法规、司法案例、合同范本
- **特点**: 专业、全面，但需要付费
- **适用**: 企业级应用

#### 2.2 威科先行
- **网址**: https://law.wkinfo.com.cn/
- **内容**: 法律法规、实务指南
- **特点**: 专业法律数据库

#### 2.3 法信
- **网址**: https://www.faxin.cn/
- **内容**: 法律法规、案例、合同模板
- **特点**: 最高人民法院官方支持

### 3. 建设工程相关法规（重点）

#### 3.1 核心法规清单
1. **《中华人民共和国合同法》**（现为《民法典》合同编）
2. **《中华人民共和国政府采购法》**
3. **《中华人民共和国招标投标法》**
4. **《建设工程质量管理条例》**
5. **《建设工程安全生产管理条例》**
6. **《建设工程价款结算暂行办法》**
7. **《建设工程施工合同（示范文本）》（GF-2017-0201）**
8. **《政府采购货物和服务招标投标管理办法》**

#### 3.2 地方性法规
- 各省市的建设工程管理条例
- 政府采购实施办法
- 招标投标管理办法

### 4. 推荐的数据获取方案

#### 方案A：构建结构化知识库（推荐）
```
backend/app/data/legal_knowledge/
├── regulations/
│   ├── contract_law.json          # 合同法相关条款
│   ├── procurement_law.json        # 政府采购法相关条款
│   ├── construction_law.json       # 建设工程相关法规
│   └── standard_clauses.json       # 标准合同条款模板
├── rules/
│   ├── compliance_rules.json       # 合规性检查规则
│   ├── risk_patterns.json          # 风险模式识别
│   └── violation_examples.json      # 违规案例
└── templates/
    └── standard_contract_template.txt  # 标准合同模板
```

#### 方案B：使用向量数据库（高级）
- 使用 **ChromaDB** 或 **Pinecone** 存储法律条文
- 使用 **Embedding** 模型将法律条文向量化
- 使用 **RAG（检索增强生成）** 技术进行审查

## 二、技术架构设计

### 2.1 系统架构

```
┌─────────────────┐
│   前端界面      │
│  - 审查按钮     │
│  - 问题展示     │
│  - 标注高亮     │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│   API接口层     │
│  /contracts/{id}│
│  /ai-review     │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│   AI Agent层    │
│  - LLM调用      │
│  - 规则引擎     │
│  - 知识检索     │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│   知识库层      │
│  - 法律条文     │
│  - 规则库       │
│  - 案例库       │
└─────────────────┘
```

### 2.2 技术栈选择

#### LLM选择
1. **OpenAI GPT-4/GPT-3.5**（推荐）
   - API稳定，中文支持好
   - 需要API Key，有费用

2. **通义千问/Qwen**
   - 阿里云提供，中文优化
   - 有免费额度

3. **文心一言**
   - 百度提供，中文支持好

4. **本地模型（可选）**
   - ChatGLM-6B
   - Qwen-7B
   - 需要GPU资源

#### 向量数据库（可选）
- **ChromaDB**: 轻量级，易于集成
- **FAISS**: Facebook开源，性能好
- **Milvus**: 企业级向量数据库

## 三、实现步骤

### 第一步：创建法律知识库结构

### 第二步：实现AI审查服务

### 第三步：创建API接口

### 第四步：前端界面集成

## 四、数据格式设计

### 4.1 法律条文数据结构
```json
{
  "id": "law_001",
  "title": "合同法第五十二条",
  "category": "contract_law",
  "content": "有下列情形之一的，合同无效：...",
  "keywords": ["合同无效", "无效合同", "违法"],
  "related_articles": ["law_002", "law_003"],
  "risk_level": "high"
}
```

### 4.2 审查结果数据结构
```json
{
  "contract_id": 123,
  "review_status": "completed",
  "issues": [
    {
      "id": "issue_001",
      "severity": "high",
      "category": "compliance",
      "title": "缺少违约责任条款",
      "description": "根据《合同法》第107条，合同应明确违约责任...",
      "clause_text": "合同条款中的相关文本...",
      "start_pos": 100,
      "end_pos": 150,
      "suggestion": "建议添加：'如一方违约，应承担...'",
      "related_law": "合同法第107条"
    }
  ],
  "score": 75,
  "reviewed_at": "2025-01-15T10:30:00Z"
}
```

## 五、快速开始建议

### 5.1 最小可行方案（MVP）

1. **使用OpenAI API**（最简单）
   - 注册OpenAI账号，获取API Key
   - 使用GPT-3.5或GPT-4进行审查
   - 成本：约$0.002/1000 tokens

2. **准备基础法律知识库**
   - 手动整理10-20条核心法规条款
   - 存储在JSON文件中
   - 作为prompt的一部分

3. **实现基础审查功能**
   - 调用LLM API
   - 返回问题列表
   - 前端展示

### 5.2 进阶方案

1. **使用RAG技术**
   - 将法律条文向量化
   - 检索相关条文
   - 增强prompt

2. **规则引擎**
   - 硬编码常见问题检查
   - 结合LLM进行深度分析

3. **持续优化**
   - 收集审查结果反馈
   - 优化prompt
   - 更新知识库

## 六、成本估算

### OpenAI API成本（参考）
- GPT-3.5-turbo: $0.0015/1K tokens (输入) + $0.002/1K tokens (输出)
- GPT-4: $0.03/1K tokens (输入) + $0.06/1K tokens (输出)
- 平均一次审查：约500-1000 tokens
- 成本：约$0.001-0.06/次审查

### 其他方案
- 通义千问：有免费额度
- 本地模型：需要GPU服务器，一次性成本

## 七、推荐的数据获取优先级

1. **立即获取**（核心法规）
   - 《民法典》合同编
   - 《政府采购法》
   - 《建设工程施工合同（示范文本）》

2. **短期获取**（重要法规）
   - 各省市建设工程管理条例
   - 政府采购实施办法
   - 招标投标管理办法

3. **长期维护**（持续更新）
   - 最新法规更新
   - 司法案例
   - 行业标准

## 八、数据获取工具推荐

### 8.1 爬虫工具
- **Scrapy**: Python爬虫框架
- **BeautifulSoup**: HTML解析
- **Selenium**: 动态网页爬取

### 8.2 API工具
- **requests**: HTTP请求库
- **httpx**: 异步HTTP客户端

### 8.3 数据处理
- **pandas**: 数据处理
- **json**: JSON处理
- **sqlite3**: 本地数据库存储

## 九、注意事项

1. **法律合规性**
   - 确保数据获取方式合法
   - 遵守网站robots.txt
   - 尊重版权

2. **数据准确性**
   - 优先使用官方来源
   - 定期更新法规
   - 标注数据来源

3. **AI审查局限性**
   - AI审查仅供参考
   - 不能替代专业法律意见
   - 需要人工复核

4. **隐私保护**
   - 合同内容敏感，注意加密
   - 遵守数据保护法规
   - 考虑本地部署方案

